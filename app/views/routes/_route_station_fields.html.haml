.nested-fields
  .row
    .col-md-4
      .form-group
        = f.label :existing_station
        = f.collection_select :station_id, Station.all, :id, :name, {include_blank: true}, {class: 'form-control', id: 'select_existing_station'}
    .col-md-4
      .form-group
        = f.label :arrival_time
        .input-group.date.timepicker
          = f.text_field(:arrival_time, value: nilTime(f.object.arrival_time), class: 'form-control')
          %span.input-group-addon
            %span.glyphicon.glyphicon-time
        = f.error_messages_for(:arrival_time)
    .col-md-4
      .form-group
        = f.label :is_missed
        = f.check_box :is_missed, {}, '1', '0'
    = f.fields_for :station, f.object.station || f.object.build_station do |s|
      .row#nested_station
        = s.hidden_field :id, {class: "hidden_station_id"}
        .col-md-6
          .form-group
            = s.label :name
            = s.text_field :name, {class: "form-control name_field"}
        .col-md-6
          .form-group
            = s.label :number
            = s.number_field :number, {class: "form-control number_field", min: 1}
      .row
        .col-md-6
          .form-group#tariff_zone_select
            = s.label :tariff_zone
            = s.collection_select :tariff_zone_id, TariffZone.all, :id, :name, {include_blank: true}, {class: "form-control tariff_zone_id_field", id: 'select_existing_tariff_zone'}
        .col-md-6
          .form-group#tariff_zone
            = s.fields_for :tariff_zone, s.object.tariff_zone || s.object.build_tariff_zone do |tz|
              = render 'stations/tariff_zone_fields', f: tz
  .form-actions
    = link_to_remove_association f, class: 'btn btn-danger' do
      = fa_icon :times
      = t('cocoon.route_stations.drop')
    -# = link_to route_station_path(@route.stations.first), method: :delete, class: 'btn btn-danger' do
    -#   = fa_icon :times
    -#   = t('cocoon.route_stations.remove')
